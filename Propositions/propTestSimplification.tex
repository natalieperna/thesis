\begin{proposition}
\label{prop:test_simplificaiton}
	Let $P$ and $Q$ be relations.
	\begin{enumerate}[(i)]
		\item $P \text{ is a bijection} \nAnd Q \text{ is surjective} \mImp \RArightresidual{P}{Q} \text{ is surjective}$
		\item $\RArightresidual{P}{Q} = \RAconverse{(\RArightresidual{Q}{P})} \mImp P \STleq \RAcompose{Q}{(\RArightresidual{Q}{P})}$ for $Q$ a bijection and $P$ surjective
		\item $P \STleq \RAcompose{Q}{(\RArightresidual{Q}{P})} \nAnd Q \STleq \RAcompose{P}{(\RArightresidual{P}{Q})} \mIff \RArightresidual{P}{Q} = \RAconverse{(\RArightresidual{Q}{P})}$ for $P$ and $Q$ bijections
	\end{enumerate}
	
\begin{proof}~
	\begin{enumerate}[(i)]
		\item 
			\Beginproof
				\pred{$\RArightresidual{P}{Q} \text{ is surjective}$}
				$\mIff$ \com{Formalization}
				\pred{$\RAtop = \RAcompose{\RAtop}{(\RArightresidual{P}{Q})}$}
				$\mIff$ \com{Definition~\ref{def:residue}(i)}
				\pred{$\RAtop = \RAcompose{\RAtop}{\RAcomplement{\RAcompose{\RAconverse{P}}{\RAcomplement{Q}}}}$}
				$\mIff$ \com{$P$ is a bijection $\!\!\!\mIff\!\!\! \RAconverse{P}$ is a mapping $\!\!\!\mIff\!\!\! \RAcompose{\RAconverse{P}}{\RAcomplement{S}} = \RAcomplement{\RAcompose{\RAconverse{P}}{S}}$ for all $S$}
				\pred{$\RAtop = \RAcompose{\RAtop}{\RAcomplement{\RAcomplement{\RAcompose{\RAconverse{P}}{Q}}}}$}
				$\mIff$ \com{Proposition~\ref{prop:relationproperties}(i)}
				\pred{$\RAtop = \RAcompose{\RAtop}{\RAcompose{\RAconverse{P}}{Q}}$}
				$\mIff$ \com{$P \text{ is total} \mIff \RAcompose{P}{\RAtop} = \RAtop \mIff \RAcompose{\RAtop}{\RAconverse{P}} = \RAtop$}
				\pred{$\RAtop = \RAcompose{\RAtop}{Q}$}
				$\mIff$ \com{$Q \text{ is surjective} \mIff \RAcompose{\RAtop}{Q} = \RAtop$}
				\pred{$\RAtop = \RAtop$}
				$\mIff$ \com{Identity of $=$}
				\pred{$\true$}
			\Endproof
			\vspace{-0.5in}
		\item 
			\Beginproof
				\pred{$\RArightresidual{P}{Q} = \RAconverse{(\RArightresidual{Q}{P})}$}
				$\mIff$ \com{$\RAconverse{(\RArightresidual{Q}{P})} = \RAleftresidual{\RAconverse{P}}{\RAconverse{Q}}$}
				\pred{$\RArightresidual{P}{Q} = \RAleftresidual{\RAconverse{P}}{\RAconverse{Q}}$}
				$\mIff$ \com{Definition~\ref{def:residue}(i) \hsep Definition~\ref{def:residue}(ii)}
				\pred{$\RAcomplement{\RAcompose{\RAconverse{P}}{\RAcomplement{Q}}} = \RAcomplement{\RAcompose{\RAcomplement{\RAconverse{P}}}{Q}}$}
				$\mIff$ \com{Complement both sides \!\!\!\!\!\hsep\!\!\!\!\! Proposition~\ref{prop:relationproperties}(i)}
				\pred{$\RAcompose{\RAconverse{P}}{\RAcomplement{Q}} = \RAcompose{\RAcomplement{\RAconverse{P}}}{Q}$}
				$\mIff$ \com{Antisymmetry}
				\pred{$\RAcompose{\RAconverse{P}}{\RAcomplement{Q}} \STleq \RAcompose{\RAcomplement{\RAconverse{P}}}{Q} \nAnd \RAcompose{\RAcomplement{\RAconverse{P}}}{Q} \STleq \RAcompose{\RAconverse{P}}{\RAcomplement{Q}}$}
				$\mIff$ \com{Proposition~\ref{prop:residue}(i)}
				\pred{$\RAconverse{P} \STleq \RAleftresidual{(\RAcompose{\RAcomplement{\RAconverse{P}}}{Q})}{\RAcomplement{Q}} \nAnd \RAcomplement{\RAconverse{P}} \STleq \RAleftresidual{(\RAcompose{\RAconverse{P}}{\RAcomplement{Q}})}{Q}$}
				$\mIff$ \com{Hypothesis: $\RArightresidual{P}{Q} = \RAconverse{(\RArightresidual{Q}{P})} \mIff \RAcompose{\RAconverse{P}}{\RAcomplement{Q}} = \RAcompose{\RAcomplement{\RAconverse{P}}}{Q}$}
				\pred{$\RAconverse{P} \STleq \RAleftresidual{(\RAcompose{\RAcomplement{\RAconverse{P}}}{Q})}{\RAcomplement{Q}} \nAnd \RAcomplement{\RAconverse{P}} \STleq \RAleftresidual{(\RAcompose{\RAcomplement{\RAconverse{P}}}{Q})}{Q}$}
				$\mIff$ \com{Converse both sides \hsep Proposition~\ref{prop:relationproperties}(ii) \hsep \\ Complement both sides \hsep Proposition~\ref{prop:relationproperties}(i)}
				\pred{$P \STleq \RAconverse{\big[\RAleftresidual{(\RAcompose{\RAcomplement{\RAconverse{P}}}{Q})}{\RAcomplement{Q}}\big]} \nAnd \big[\RAcomplement{\RAleftresidual{(\RAcompose{\RAcomplement{\RAconverse{P}}}{Q})}{Q}}\big] \STleq \RAconverse{P}$}
				$\mIff$ \com{Definition~\ref{def:residue}(ii)}
				\pred{$P \STleq \RAconverse{\big[\RAcomplement{\RAcompose{\RAcomplement{\RAcompose{\RAcomplement{\RAconverse{P}}}{Q}}}{\RAcomplement{\RAconverse{Q}}}}\big]} \nAnd \big[\RAcomplement{\RAcomplement{\RAcompose{\RAcomplement{\RAcompose{\RAcomplement{\RAconverse{P}}}{Q}}}{\RAconverse{Q}}}}\big] \STleq \RAconverse{P}$}
				$\mIff$ \com{Proposition~\ref{prop:relationproperties}(i) \hsep Proposition~\ref{prop:relationproperties}(vii)}
				\pred{$P \STleq \RAcomplement{\RAcompose{\RAcomplement{Q}}{\RAcomplement{\RAcompose{\RAconverse{Q}}{\RAcomplement{P}}}}} \nAnd \RAcompose{\RAcomplement{\RAcompose{\RAcomplement{\RAconverse{P}}}{Q}}}{\RAconverse{Q}} \STleq \RAconverse{P}$}
				$\mIff$ \com{Converse both sides \hsep Proposition~\ref{prop:relationproperties}(ii) \hsep \\ Proposition~\ref{prop:relationproperties}(vii)}
				\pred{$P \STleq \RAcomplement{\RAcompose{\RAcomplement{Q}}{\RAcomplement{\RAcompose{\RAconverse{Q}}{\RAcomplement{P}}}}} \nAnd \RAcompose{Q}{\RAcomplement{\RAcompose{\RAconverse{Q}}{\RAcomplement{P}}}} \STleq P$}
				$\mIff$ \com{$\RArightresidual{Q}{P} \text{ is surjective } \mIff \RAcomplement{\RAcompose{Q}{\RAcomplement{\RAcompose{\RAconverse{Q}}{\RAcomplement{P}}}}} \STleq \RAcompose{\RAcomplement{Q}}{\RAcomplement{\RAcompose{\RAconverse{Q}}{\RAcomplement{P}}}} \mIff \RAcomplement{\RAcompose{\RAcomplement{Q}}{\RAcomplement{\RAcompose{\RAconverse{Q}}{\RAcomplement{P}}}}} \STleq \RAcomplement{\RAcomplement{\RAcompose{Q}{\RAcomplement{\RAcompose{\RAconverse{Q}}{\RAcomplement{P}}}}}}$}
				\pred{$P \STleq \RAcomplement{\RAcompose{\RAcomplement{Q}}{\RAcomplement{\RAcompose{\RAconverse{Q}}{\RAcomplement{P}}}}} \STleq \RAcomplement{\RAcomplement{\RAcompose{Q}{\RAcomplement{\RAcompose{\RAconverse{Q}}{\RAcomplement{P}}}}}} \nAnd \RAcompose{Q}{\RAcomplement{\RAcompose{\RAconverse{Q}}{\RAcomplement{P}}}} \STleq P$}
				$\mImp$ \com{Proposition~\ref{prop:relationproperties}(i) \hsep Transitivity of $\STleq$}
				\pred{$P \STleq \RAcompose{Q}{\RAcomplement{\RAcompose{\RAconverse{Q}}{\RAcomplement{P}}}} \nAnd \RAcompose{Q}{\RAcomplement{\RAcompose{\RAconverse{Q}}{\RAcomplement{P}}}} \STleq P$}
				$\mIff$ \com{Definition~\ref{def:residue}(i)}
				\pred{$P \STleq \RAcompose{Q}{(\RArightresidual{Q}{P})} \nAnd \RAcompose{Q}{(\RArightresidual{Q}{P})} \STleq P$}
				$\mIff$ \com{Proposition~\ref{prop:residueproperties}(viii) \hsep Identity of $\AAnd$}
				\pred{$P \STleq \RAcompose{Q}{(\RArightresidual{Q}{P})}$}
			\Endproof
			\item 
				\Beginproof
					\pred{$\RArightresidual{P}{Q} = \RAconverse{(\RArightresidual{Q}{P})}$}
					$\mIff$ \com{Proposition~\ref{prop:residueproperties}(ii)}
					\pred{$\RArightresidual{P}{Q} = \RAleftresidual{\RAconverse{P}}{\RAconverse{Q}}$}
					$\mIff$ \com{Definition~\ref{def:residue}(i) \hsep Definition~\ref{def:residue}(ii)}
					\pred{$\RAcomplement{\RAcompose{\RAconverse{P}}{\RAcomplement{Q}}} = \RAcomplement{\RAcompose{\RAcomplement{\RAconverse{P}}}{Q}}$}
					$\mIff$ \com{Complement both sides \hsep Proposition~\ref{prop:relationproperties}(i)}
					\pred{$\RAcompose{\RAconverse{P}}{\RAcomplement{Q}} = \RAcompose{\RAcomplement{\RAconverse{P}}}{Q}$}
					$\mIff$ \com{Antisymmetry}
					\pred{$\RAcompose{\RAconverse{P}}{\RAcomplement{Q}} \STleq \RAcompose{\RAcomplement{\RAconverse{P}}}{Q} \nAnd \RAcompose{\RAcomplement{\RAconverse{P}}}{Q} \STleq \RAcompose{\RAconverse{P}}{\RAcomplement{Q}}$}
					$\mIff$ \com{Proposition~\ref{prop:residue}(ii)}
					\pred{$\RAcomplement{Q} \STleq \RArightresidual{\RAconverse{P}}{(\RAcompose{\RAcomplement{\RAconverse{P}}}{Q})}  \nAnd Q \STleq \RArightresidual{\RAcomplement{\RAconverse{P}}}{(\RAcompose{\RAconverse{P}}{\RAcomplement{Q}})}$}
					$\mIff$ \com{Definition~\ref{def:residue}(i) \hsep Proposition~\ref{prop:relationproperties}(ii)}
					\pred{$\RAcomplement{Q} \STleq \RAcomplement{\RAcompose{P}{\RAcomplement{\RAcompose{\RAcomplement{\RAconverse{P}}}{Q}}}} \nAnd Q \STleq \RAcomplement{\RAcompose{\RAcomplement{P}}{\RAcomplement{\RAcompose{\RAconverse{P}}{\RAcomplement{Q}}}}}$}
					$\mIff$ \com{Complement both sides \hsep Proposition~\ref{prop:relationproperties}(i)}
					\pred{$\RAcompose{P}{\RAcomplement{\RAcompose{\RAcomplement{\RAconverse{P}}}{Q}}} \STleq Q \nAnd Q \STleq \RAcomplement{\RAcompose{\RAcomplement{P}}{\RAcomplement{\RAcompose{\RAconverse{P}}{\RAcomplement{Q}}}}}$}
					$\mIff$ \com{Definition~\ref{def:residue}(i) \hsep Definition~\ref{def:residue}(ii)}
					\pred{$\RAcompose{P}{(\RAleftresidual{\RAconverse{P}}{\RAconverse{Q}})} \STleq Q \nAnd Q \STleq \RAcomplement{\RAcompose{\RAcomplement{P}}{(\RArightresidual{P}{Q})}}$}
					$\mIff$ \com{$P \text{ is a bijection} \nAnd Q \text{ is surjective} \mImp \RArightresidual{P}{Q} \text{ is surjective}$ \hsep \\ $\RArightresidual{P}{Q} \text{ is surjective} \mIff \RAcomplement{\RAcompose{\RAcomplement{P}}{(\RArightresidual{P}{Q})}} \STleq \RAcompose{\RAcomplement{\RAcomplement{P}}}{(\RArightresidual{P}{Q})}$ }
					\pred{$\RAcompose{P}{(\RAleftresidual{\RAconverse{P}}{\RAconverse{Q}})} \STleq Q \nAnd Q \STleq \RAcomplement{\RAcompose{\RAcomplement{P}}{(\RArightresidual{P}{Q})}} \STleq \RAcompose{\RAcomplement{\RAcomplement{P}}}{(\RArightresidual{P}{Q})}$}
					$\mIff$ \com{Proposition~\ref{prop:relationproperties}(i) \hsep Transitivity of $\STleq$}
					\pred{$\RAcompose{P}{(\RAleftresidual{\RAconverse{P}}{\RAconverse{Q}})} \STleq Q \nAnd Q \STleq \RAcompose{P}{(\RArightresidual{P}{Q})}$}
					$\mIff$ \com{Hypothesis: $Q \STleq \RAcompose{P}{(\RArightresidual{P}{Q})}$}
					\pred{$\RAcompose{P}{(\RAleftresidual{\RAconverse{P}}{\RAconverse{Q}})} \STleq Q \nAnd \true$}
					$\mIff$ \com{Identity of $\AAnd$ \hsep Proposition~\ref{prop:residue}(i)}
					\pred{$P \STleq \RAleftresidual{Q}{(\RAleftresidual{\RAconverse{P}}{\RAconverse{Q}})}$}
					$\mIff$ \com{Definition~\ref{def:residue}(ii)}
					\pred{$P \STleq \RAcomplement{\RAcompose{\RAcomplement{Q}}{\RAconverse{(\RAleftresidual{\RAconverse{P}}{\RAconverse{Q}})}}}$}
					$\mIff$ \com{Proposition~\ref{prop:residueproperties}(i)}
					\pred{$P \STleq \RAcomplement{\RAcompose{\RAcomplement{Q}}{(\RArightresidual{Q}{P})}}$}
					$\mIff$ \com{$Q \text{ is a bijection} \nAnd P \text{ is surjective} \mImp \RArightresidual{Q}{P} \text{ is surjective}$ \hsep \\ $\RArightresidual{Q}{P} \text{ is surjective} \mIff \RAcomplement{\RAcompose{\RAcomplement{Q}}{(\RArightresidual{Q}{P})}} \STleq \RAcompose{\RAcomplement{\RAcomplement{Q}}}{(\RArightresidual{Q}{P})}$ }
					\pred{$P \STleq \RAcomplement{\RAcompose{\RAcomplement{Q}}{(\RArightresidual{Q}{P})}} \STleq \RAcompose{\RAcomplement{\RAcomplement{Q}}}{(\RArightresidual{Q}{P})}$}
					$\mIff$ \com{Proposition~\ref{prop:relationproperties}(i)  \hsep Transitivity of $\STleq$}
					\pred{$P \STleq \RAcompose{Q}{(\RArightresidual{Q}{P})}$}
					$\mIff$ \com{Hypothesis: $P \STleq \RAcompose{Q}{(\RArightresidual{Q}{P})}$}
					\pred{$\true$}
				\Endproof
				\vspace{-0.5in}
	\end{enumerate}
\end{proof}	

\end{proposition}